DELIMITER $$
CREATE PROCEDURE insertarAutor(IN p_autorID INT, IN p_autorNombre VARCHAR(255), IN p_biografiaAutor TEXT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
    END;
    START TRANSACTION;
        IF NOT EXISTS (SELECT 1 FROM autor WHERE autorID = p_autorID AND autorNombre = p_autorNombre) THEN
            INSERT INTO autor (autorID, autorNombre, biografiaAutor) VALUES (1, 'isa', 'mujer');
            INSERT INTO autor (autorID, autorNombre, biografiaAutor) VALUES (2, 'camilo', 'hombre');
            INSERT INTO autor (autorID, autorNombre, biografiaAutor) VALUES (3, 'felipe', 'flaco');
            INSERT INTO autor (autorID, autorNombre, biografiaAutor) VALUES (4, 'camila', 'blanca');            
            INSERT INTO autor (autorID, autorNombre, biografiaAutor)VALUES (p_autorID, p_autorNombre, p_biografiaAutor);
        ELSE
            ROLLBACK;
        END IF;
        IF EXISTS (SELECT 1 FROM autor WHERE autorID = p_autorID) THEN
            UPDATE autor SET autorNombre = 'actu1', biografiaAutor = 'feo' WHERE autorID = 1;
            UPDATE autor SET autorNombre = 'actu2', biografiaAutor = 'linda' WHERE autorID = 2;
            DELETE FROM autor WHERE autorID = 3;
        ELSE
            ROLLBACK;
        END IF;
        COMMIT;
END$$
DELIMITER ;
CALL insertarAutor(5, 'Carlos', 'calvo');
