!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="854d327c-6cb7-438e-9d94-37a7b82b2165",e._sentryDebugIdIdentifier="sentry-dbid-854d327c-6cb7-438e-9d94-37a7b82b2165")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4361,3088],{7489:function(e,t,n){n.d(t,{I:function(){return u},N:function(){return i.N}});var r=n(97458),a=n(16830),o=n.n(a),i=n(29646);let l=o()(()=>n.e(9059).then(n.bind(n,69059)).then(e=>e.ConfirmSafariClipboardComponent),{loadableGenerated:{webpack:()=>[69059]},ssr:!1}),u=()=>{let{onSucess:e}=(0,i.N)();return e&&(0,r.jsx)(l,{})}},29646:function(e,t,n){n.d(t,{N:function(){return o}});var r=n(7616);let a=(0,n(24399).cn)(null),o=()=>{let[e,t]=(0,r.KO)(a);return{onClose:()=>t(null),setConfirm:e=>t({onSuccess:e}),onSucess:null==e?void 0:e.onSuccess}}},46051:function(e,t,n){n.d(t,{W:function(){return f},D:function(){return m}});var r=n(97458),a=n(88711),o=n(52983),i=n(34777),l=n(55046),u=n(51837),c=n(9086);n(56367);let s={Prev:c.Z,Next:u.Z},d=(0,o.forwardRef)((e,t)=>{let{direction:n,...o}=e;return(0,r.jsx)(a.x,{as:"button",width:"45",height:"45",position:"absolute",top:"half",color:"white",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"sm",backgroundColor:{default:"transparent",hover:"white/20"},...o,left:"Prev"===n?"15":void 0,right:"Next"===n?"15":void 0,className:"_1rmnktx0",ref:t,"data-cy":"".concat("Prev"===n?"prev":"next","-video"),children:(0,r.jsx)(l.J,{as:s[n]})})}),f=e=>{let{urlDetailGenerator:t}=e,[n,o]=(0,i.iA)(),{previousResource:l,nextResource:u}=(0,i.CY)(t);return(m(l,u),l||u)?(0,r.jsxs)(a.x,{as:"nav",display:{default:"none",lg:"block"},children:[(0,r.jsx)(d,{direction:"Prev",onClick:l,disabled:!l||n}),(0,r.jsx)(d,{direction:"Next",onClick:u,disabled:!u||n})]}):null},m=(e,t)=>{let[n]=(0,i.iA)();(0,o.useEffect)(()=>{let r=r=>{!n&&("ArrowLeft"===r.key?e&&e():"ArrowRight"===r.key&&t&&t())};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[e,t,n])}},66033:function(e,t,n){n.d(t,{D:function(){return r.D},W:function(){return r.W}});var r=n(46051)},72957:function(e,t,n){n.d(t,{Fm:function(){return R},Uc:function(){return A}});var r=n(97458),a=n(60889),o=n(66827),i=n(83648),l=n(52983),u=n(61913),c=n(34777),s=n(90435),d=n(88711),f=n(55046),m=n(83598);let p=(0,l.forwardRef)((e,t)=>(0,r.jsx)(d.x,{as:"button",width:"".concat(45),height:"".concat(45),position:"absolute",right:{default:"0",lg:"15"},top:{default:"-45",lg:"20"},color:"white",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"sm",backgroundColor:{default:"transparent",hover:"white/20"},...e,ref:t,children:(0,r.jsx)(f.J,{as:m.Z})}));var b=n(7616),g=n(1850),h=n(79507),v=n(68320);let _=()=>{let e=(0,i.useRouter)(),t=(0,c.Zk)();(0,l.useEffect)(()=>{let n=(e,n)=>{let{shallow:r}=n;r||t()};return e.events.on("routeChangeComplete",n),()=>{e.events.off("routeChangeComplete",n)}},[t,e])},w=()=>{let e=(0,c.Mr)(),t=(0,i.useRouter)(),n=(0,c.aJ)(),r=(0,h.Q)(),a=(0,b.Dv)(v.lS);return _(),t.beforePopState(t=>{let{as:o,options:i}=t,{shallow:l}=i;if(a)return r(),!0;if(!l)return!0;if(n&&o.endsWith(n.as))return e(null),!0;let u=y.safeParse(o);return e(u.success?u.data:null),!1}),null},y=g.z.string().min(4).max(255).transform((e,t)=>{try{var n,r;let t=null===(r=e.split("#").shift())||void 0===r?void 0:null===(n=r.split("_").pop())||void 0===n?void 0:n.replace(".htm","");return g.z.coerce.number().parse(t).valueOf()}catch(e){return t.addIssue({code:g.z.ZodIssueCode.custom,message:"ID could not be extracted from code"}),g.z.NEVER}});var k=n(66033);n(14885),n(29173),n(20810);var x=n(22319),C=(0,x.c)({defaultClassName:"_btqskge _btqskg9 _1286nb12ji _1286nb129i _1286nb14kc _1286nb14l4 _1286nb14lo _1286nb14mg _1286nb14n0 _1286nb14ns _1286nb14oc _1286nb14p4 _1286nb12fi _1286nb12em _1286nb1236 _1286nb124w _1286nb11c0 _1286nb119y _1286nb13lo",variantClassNames:{isOnboardingEnabled:{true:"_1286nb1h _1286nb1k _1286nb18s",false:"_1286nb1g _1286nb1j"},backgroundMode:{light:"_1286nb18nd",dark:"_1286nb17dm"}},defaultVariants:{isOnboardingEnabled:!1,backgroundMode:"light"},compoundVariants:[]}),j="_1286nb120o _1286nb11m0 _1286nb12i6 _1286nb12ky _1286nb1286 _1286nb12ay _1286nb11b6 _1286nb13fi _1286nb147c _1286nb147t _1286nb1ac _1286nb13lo",S=(0,x.c)({defaultClassName:"_btqskg4 _btqskg1 _1286nb1au _1286nb1j6 _1286nb1ri _1286nb1zu _1286nb12u6 _1286nb12uu _1286nb15 _1286nb1ai _1286nb118i _1286nb17dm",variantClassNames:{overlay:{base:"_1286nb17mm _1286nb196 _1286nb19y",black:"_1286nb17dm _1286nb196 _1286nb19m"}},defaultVariants:{overlay:"base"},compoundVariants:[]});let I=e=>{let{children:t,open:n,onOpenChange:a}=e,{disableOnboarding:i}=(0,u.Yj)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{}),(0,r.jsx)(o.fC,{open:n,onOpenChange:a,modal:!0,children:(0,r.jsx)(o.aV,{className:S({overlay:"base"}),onClick:i,children:(0,r.jsx)(o.VY,{className:j,onInteractOutside:e=>e.preventDefault(),children:(0,r.jsx)("div",{className:C({isOnboardingEnabled:!0}),children:t})})})})]})},R=e=>{let{urlDetailGenerator:t,children:n,dialogContent:i=j,backgroundMode:c="light",showCloseButton:s=!0,showNavigation:d=!0,outSideClick:f=!0}=e,m=E(),b=A(),g=P();(0,a.$6)(m);let{isEditToolsOnboardingEnabled:h}=(0,u.Yj)(),v=(0,l.useCallback)(e=>{let t=e.target;t&&"dialog"===t.getAttribute("role")&&b()},[b]),_=e=>{e.preventDefault()};return h?(0,r.jsx)(I,{open:m,onOpenChange:b,children:n}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{}),(0,r.jsx)(o.fC,{open:m,onOpenChange:b,modal:!0,children:(0,r.jsx)(o.aV,{className:S({overlay:"light"===c?"base":"black"}),onClick:v,children:(0,r.jsxs)(o.VY,{className:i,...!f&&{onPointerDownOutside:_,onInteractOutside:_},children:[s&&(0,r.jsx)(o.x8,{asChild:!0,children:(0,r.jsx)(p,{})}),d&&(0,r.jsx)(k.W,{urlDetailGenerator:t}),(0,r.jsx)("div",{className:C({backgroundMode:c}),ref:g,children:n})]})})})]})},A=()=>{let e=(0,c.Zk)(),{push:t}=(0,i.useRouter)(),n=(0,c.aJ)();return(0,l.useCallback)(()=>{if(null===n){e();return}t({pathname:n.pathname,query:n.query},n.as,{shallow:!0,scroll:!1}).then(()=>{e(),(0,s.lS)(()=>(0,s.c1)("ssmNavigate"),500)})},[e,n,t])},E=()=>null!==(0,c.bA)(),P=()=>{let e=(0,l.useRef)(null),t=(0,c.bA)();return(0,l.useEffect)(()=>{t&&e.current&&(e.current.scrollTop=0)},[t]),e}},62687:function(e,t,n){n.r(t),n.d(t,{Seo:function(){return f}});var r=n(97458),a=n(77575),o=n(71409),i=n(88887),l=n.n(i),u=n(52983),c=n(45156),s=n(15303);let d=e=>{let{title:t,description:n,url:r,image:a,hashtags:o=[],type:i}=e;return(0,u.useMemo)(()=>{let e=a||{url:"".concat(s.p,"/meta-tags-social/og-fb-logo-en.png?w=1200"),width:1200,height:676},l="".concat(n).concat(o.length>0?" ".concat(o.map(e=>"#".concat(e)).join(" ")):"");return[{property:"og:title",content:t},{property:"og:description",content:l},{property:"og:type",content:i},{property:"og:url",content:r},{property:"og:image",content:e.url},{property:"og:image:width",content:"".concat(e.width)},{property:"og:image:height",content:"".concat(e.height)},{property:"og:image:alt",content:t},{property:"og:site_name",content:"Freepik"},{property:"fb:admins",content:"1031507953"},{property:"twitter:card",content:"summary_large_image"},{property:"twitter:site",content:"@freepik"},{property:"twitter:creator",content:"@freepik"},{property:"twitter:title",content:t},{property:"twitter:image:src",content:e.url},{property:"twitter:url",content:r},{property:"twitter:description",content:l}]},[a,n,o,t,i,r])},f=e=>{let{title:t,description:n,cdns:i,image:s,alternates:f,defaultAlternate:m,noIndex:p=!1,excludeCanonical:b=!1,replaceCanonical:g=[],hashtags:h,forceUrl:v,type:_="article"}=e,w=(0,o.ZK)(),y=(0,a.to)({withParams:!1,replacePaths:!0}),k=(0,a.to)({withQuery:!1,withParams:!1,replacePaths:!0}),x=d({title:t,description:n,url:v||y,image:s,hashtags:h,type:_}),C=(0,u.useMemo)(()=>g.reduce((e,t)=>{let{matcher:n,replace:r}=t;return e.replace(n,r)},k),[k,g]);return(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:t}),n&&(0,r.jsx)("meta",{name:"description",content:n}),c.v.map(e=>{let{rel:t,type:n,href:a,sizes:o}=e;return(0,r.jsx)("link",{rel:t,type:n,href:a,sizes:o},"".concat(t,"-").concat(n&&o?"".concat(n,"-").concat(o):n||o))}),x.map(e=>{let{property:t,content:n}=e;return(0,r.jsx)("meta",{property:t,content:n},t)}),c.m.map(e=>{let{rel:t,href:n,crossOrigin:a}=e;return(0,r.jsx)("link",{rel:t,href:n,crossOrigin:a},"".concat(t,"-").concat(n,"-").concat(a))}),null==i?void 0:i.map(e=>(0,r.jsx)("link",{rel:"dns-prefetch",href:e},e)),(0,r.jsx)("meta",{name:"p:domain_verify",content:"fdda3a988da750af54ad90466dd90119"}),(0,r.jsx)("meta",{name:"facebook-domain-verification",content:"3oh58risl8zubokve93o200pvyihj0"}),(0,r.jsx)("meta",{name:"robots",content:"max-image-preview:large"}),(0,r.jsx)("meta",{name:"lang",content:w}),(p||"zh-HK"===w)&&(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow, noarchive"}),!b&&(0,r.jsx)("link",{rel:"canonical",href:null!=v?v:C}),null==f?void 0:f.filter(e=>"zh-HK"!==e.lang).map(e=>{let{href:t,lang:n}=e;return(0,r.jsx)("link",{rel:"alternate",hrefLang:n,href:t},n)}),m&&(0,r.jsx)("link",{rel:"alternate",hrefLang:"x-default",href:m}),"en"===w&&(0,r.jsx)("link",{rel:"manifest",href:"/manifest.json"})]})}},67310:function(e,t,n){n.d(t,{e:function(){return r}});let r=(0,n(52983).createContext)(null)},21567:function(e,t,n){n.d(t,{Sq:function(){return p},J3:function(){return g},TV:function(){return b.T},ql:function(){return h.q}});var r=n(67310),a=n(97458),o=n(83648),i=n(52983),l=n(7616),u=n(1347),c=n(20534),s=n(69629),d=n(89818);let f=()=>{let{id:e}=(0,s.ph)(),t=(0,l.Dv)((0,d.u)(e)),[n,r]=(0,i.useState)(!1),[a,o]=(0,i.useState)(void 0),[f,m]=(0,i.useState)(void 0),[p,b]=(0,c.iA)(),[g,h]=(0,i.useState)(!1),[v,_]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[k,x]=(0,u.E)({slides:t.length+1,initial:0,loop:!0,defaultAnimation:{duration:300},animationEnded(e){let n=e.track.details.rel;o(null==t?void 0:t[n])},created(){h(!0)}}),C=(0,i.useCallback)(e=>{var n;o(e),null===(n=x.current)||void 0===n||n.moveToIdx(t.findIndex(t=>t.uuid===e.uuid))},[t,x]),j=(0,i.useCallback)(e=>{var t;null===(t=x.current)||void 0===t||t[e]()},[x]);return(0,i.useEffect)(()=>{b(n)},[n,b]),(0,i.useMemo)(()=>({isAIVariationsLoading:n,setIsAIVariationsLoading:r,selectedAIVariation:a,handleSetSelectedAIVariation:C,prompt:f,setPrompt:m,sliderRef:k,sliderNavigation:j,sliderLoaded:g,hasNsfw:v,setHasNsfw:_,forceAIVariationsButtonTooltip:w,setForceAIVariationsButtonTooltip:y,setSelectedAIVariation:o}),[n,a,C,f,k,j,g,v,w])},m=()=>{let[e,t]=(0,c.iA)(),[n,r]=(0,i.useState)(!0),[a,o]=(0,i.useState)(!1),[l,u]=(0,i.useState)(!1),[s,d]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{t(a)},[a,t]),(0,i.useMemo)(()=>({isRemoveBackgroundLoading:a,setIsRemoveBackgroundLoading:o,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:r,forceRemoveBackgroundButtonTooltip:l,setForceRemoveBackgroundButtonTooltip:u,imageUrl:s,setImageUrl:d}),[l,s,a,n])},p=e=>{var t;let{children:n}=e,{asPath:l}=(0,o.useRouter)(),[u,c]=(0,i.useState)(),[s,d]=(0,i.useState)("original"),[p,b]=(0,i.useState)(void 0),[g,h]=(0,i.useState)(void 0),v=m(),_=f(),{setRemoveBackgroundAnimationEnd:w}=v,y=(0,i.useCallback)(()=>{d("original"),b(void 0),h(void 0)},[]),k=(0,i.useMemo)(()=>({...v,..._,imagePreviewMode:s,setImagePreviewMode:d,editedImageDimensions:u,setEditedImageDimensions:c,isRemoveBackgroundActive:"transparent"===s,isAIVariationsActive:"variations"===s,isExpandActive:"expand"===s,isEditToolsLoading:v.isRemoveBackgroundLoading||_.isAIVariationsLoading,setImageModeToOriginal:y,lastEditedImage:g,lastEditTool:p}),[_,u,s,p,g,v,y]);return(0,i.useEffect)(()=>{d("original"),w(!0)},[l,w]),(0,i.useEffect)(()=>{var e;let t={transparent:v.imageUrl,variations:null===(e=_.selectedAIVariation)||void 0===e?void 0:e.imageUrl};["transparent","variations"].includes(s)&&(h(t[s]),b(s))},[null===(t=_.selectedAIVariation)||void 0===t?void 0:t.imageUrl,s,v.imageUrl]),(0,a.jsx)(r.e.Provider,{value:k,children:n})};var b=n(93354);let g=()=>{let{isAIVariationsLoading:e,setIsAIVariationsLoading:t,selectedAIVariation:n,handleSetSelectedAIVariation:r,prompt:a,setPrompt:o,sliderRef:l,sliderLoaded:u,sliderNavigation:c,hasNsfw:s,setHasNsfw:d,forceAIVariationsButtonTooltip:f,setForceAIVariationsButtonTooltip:m}=(0,b.T)();return(0,i.useMemo)(()=>({isAIVariationsLoading:e,setIsAIVariationsLoading:t,selectedAIVariation:n,handleSetSelectedAIVariation:r,prompt:a,setPrompt:o,sliderRef:l,sliderLoaded:u,sliderNavigation:c,hasNsfw:s,setHasNsfw:d,forceAIVariationsButtonTooltip:f,setForceAIVariationsButtonTooltip:m}),[e,t,n,r,a,o,l,u,c,s,d,f,m])};var h=n(53294)},93354:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(52983),a=n(67310);let o=()=>{let e=(0,r.useContext)(a.e);if(null===e)throw Error("useEditToolsState must be used within a DetailEditToolsContext");return e}},53294:function(e,t,n){n.d(t,{q:function(){return o}});var r=n(52983),a=n(93354);let o=()=>{let{isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:o,forceRemoveBackgroundButtonTooltip:i,setForceRemoveBackgroundButtonTooltip:l,isRemoveBackgroundActive:u,imageUrl:c,setImageUrl:s}=(0,a.T)();return(0,r.useMemo)(()=>({isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:o,forceRemoveBackgroundButtonTooltip:i,setForceRemoveBackgroundButtonTooltip:l,isRemoveBackgroundActive:u,imageUrl:c,setImageUrl:s}),[e,t,n,o,i,l,u,c,s])}},89818:function(e,t,n){n.d(t,{u:function(){return i}});var r=n(24399),a=n(73139);let o=(0,r.cn)({}),i=(0,a.xu)(e=>(0,r.cn)(t=>t(o)[e]||[],(t,n,r)=>{n(o,t=>({...t,[e]:r}))}))},85618:function(e,t,n){n.d(t,{C:function(){return i},C0:function(){return v},EQ:function(){return p},H$:function(){return h},Iu:function(){return k},OI:function(){return y},PF:function(){return c},RJ:function(){return j},S3:function(){return m},Vj:function(){return b},YT:function(){return w},cj:function(){return d},cm:function(){return u},en:function(){return l},g7:function(){return o},k5:function(){return f},os:function(){return g},p3:function(){return s},s1:function(){return x},u4:function(){return _},zL:function(){return C}});var r=n(15303);let a="".concat(r.p,"/regular-detail/expand"),o="https://www.freepik.com/pikaso/embed",i="https://www.freepik.es/pikaso/embed",l="#from_element=resource_detail",u="download_after_removing_bg",c="copy_after_removing_bg",s="edit_after_removing_bg",d="download_after_reimagine",f="copy_after_reimagine",m="ai_tool_expand",p="ai_tool_retouch",b="ai_tool_reimagine",g="ai_tool_removebg",h="ai_tool_upscaler",v="ai_tool_all",_="ai_tool_all_thumbnail",w="ai_tool_expand_after_download",y="ai_tool_expand_carousel",k="ai_tool_expand_removebg",x=15e3,C=[{transKey:"expandAfterDownload.instagramStory",videoSrc:"".concat(a,"/Expand_Instagram.mp4"),miniVideoSrc:"".concat(a,"/instagram_story_mini_mobile_v2.mp4"),aspectRatio:"9:16",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.facebookPost",videoSrc:"".concat(a,"/Expand_f_post.mp4"),miniVideoSrc:"".concat(a,"/facebook_square_mini_mobile.mp4"),aspectRatio:"1:1",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.facebookCover",videoSrc:"".concat(a,"/Expand_f_wide.mp4"),miniVideoSrc:"".concat(a,"/facebook_cover_mini_mobile.mp4"),aspectRatio:"16:9",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.instagramPost",miniVideoSrc:"".concat(a,"/instagram_post_mini_mobile.mp4"),aspectRatio:"4:5",shouldShowInAttribution:!1},{transKey:"expandAfterDownload.custom",aspectRatio:"custom",shouldShowInAttribution:!0}],j="edit_tools_onboarding"},61913:function(e,t,n){n.d(t,{Yj:function(){return r.Y},sC:function(){return i},Q2:function(){return c},Ps:function(){return p}});var r=n(22073),a=n(52983),o=n(21567);let i=()=>{let{setEditedImageDimensions:e}=(0,o.TV)();return(0,a.useCallback)(t=>{t&&e({width:t.naturalWidth,height:t.naturalHeight})},[e])};var l=n(87732),u=n(78819);let c=()=>[(0,l.Ux)(),(0,u.Q)()].some(e=>e);var s=n(45123),d=n(21595),f=n(41843),m=n(7616);let p=(e,t)=>{let n=(0,m.Dv)(f.wy),r=(0,s._)(),a=(0,m.Dv)(d.UH);return((r?a:n)||t)&&!e}},24418:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(52983),a=n(58025);let o=async(e,t,n)=>{await fetch("/api/ai/log-action",{method:"POST",body:JSON.stringify({action:n,uuid:e,resourceId:t})})},i=()=>{let{id:e}=(0,a.ph)();return(0,r.useCallback)(async(t,n)=>{await o(t,e,n)},[e])}},79507:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(7616),a=n(83648),o=n(52983),i=n(68320);let l=()=>{let e=(0,r.b9)(i.lS),t=(0,r.b9)(i.SD),n=(0,r.b9)(i.he),l=(0,a.useRouter)();return(0,o.useCallback)(function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(!1),t(!1),n(null),r&&l.back()},[l,n,t,e])}},22073:function(e,t,n){n.d(t,{Y:function(){return u}});var r=n(7616),a=n(52983),o=n(85618),i=n(68320);let l=["expand","retouch","reimagine"],u=()=>{let[e,t]=(0,r.KO)(i.P1),[n,u]=(0,r.KO)(i.sz),c=(0,a.useCallback)(()=>{"true"!==localStorage.getItem(o.RJ)&&u(!0)},[u]),s=(0,a.useCallback)(()=>{localStorage.setItem(o.RJ,"true"),u(!1)},[u]),d=(0,a.useCallback)(()=>{if(e===l.length-1){s();return}t(e=>e+1)},[s,e,t]),f=(0,a.useCallback)(()=>{if(0===e){s();return}t(e=>e-1)},[s,e,t]);return(0,a.useMemo)(()=>({isEditToolsOnboardingEnabled:n,enableOnboarding:c,disableOnboarding:s,currentOnboardingTool:l[e],handleGoToNextOnboardingStep:d,handleGoToPreviousOnboardingStep:f,onboardingStep:e,totalSteps:l.length}),[s,c,d,f,n,e])}},78819:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(52983),a=n(58025);let o=e=>{let{type:t}=(0,a.ph)(),n=null!=e?e:t;return(0,r.useMemo)(()=>["photo","vector"].includes(n),[n])}},51900:function(e,t,n){n.d(t,{MF:function(){return o},QC:function(){return i},_R:function(){return r},wj:function(){return a}});let r=2e3,a=15,o=["photo","vector"],i="PNG"},87732:function(e,t,n){n.d(t,{Qc:function(){return s},Ux:function(){return m},pV:function(){return b},A8:function(){return F},CA:function(){return J}});var r=n(7616),a=n(52983),o=n(86806),i=n(24399),l=n(73139);let u=(0,i.cn)({}),c=(0,l.xu)(e=>(0,i.cn)(t=>t(u)[e],(t,n,r)=>{n(u,t=>({...t,[e]:r}))})),s=()=>{let{id:e}=(0,o.p)(),{url:t,uuid:n}=(0,r.Dv)(c(e))||{};return(0,a.useMemo)(()=>({url:t,uuid:n}),[t,n])};var d=n(58025),f=n(51900);let m=()=>{let{type:e}=(0,d.ph)();return f.MF.includes(e)},p=async(e,t)=>{if(!e)return;let n=await fetch("/api/ai/remove-background-check?uuid=".concat(e).concat(t?"&isLastCall=1":""));if(200!==n.status)return null;let{image_url:r}=await n.json();return r},b=()=>{let e=(0,a.useRef)(0),t=(0,a.useRef)();return{pollingBackgroundImageUrl:(0,a.useCallback)(n=>new Promise((r,a)=>{t.current=setInterval(async()=>{if(e.current>=f.wj){a(Error("Failed to remove background"));return}e.current+=1;let t=e.current===f.wj,o=await p(n,t);o&&r(o)},f._R)}).finally(()=>{e.current=0,clearInterval(t.current)}),[])}};var g=n(62168),h=n(69629),v=n(21567),_=n(59398),w=n(45123),y=n(72833),k=n(85043),x=n(83053);let C=()=>{let{setForceRemoveBackgroundButtonTooltip:e,setIsRemoveBackgroundLoading:t}=(0,v.ql)(),n=(0,k.J)(),r=(0,y.L)(),o=(0,w._)(),i=(0,_.E)();return(0,a.useCallback)(async a=>{let l=(0,x.L)(),u=await fetch("/api/ai/remove-background",{method:"POST",body:JSON.stringify({resourceId:a,uuid:l,walletId:r,creditsTransaction:!!(o||r)})});if(429===u.status)return e(!0),t(!1),await n(),null;if(!u.ok)throw Error("Failed to remove background");if(200===u.status){let{transactionId:e,walletId:t}=await u.json();return r||i(t),{uuid:l,transactionId:e}}return{uuid:l}},[i,o,e,t,r,n])};var j=n(62835),S=n(32748);let I=()=>{let{openToast:e}=(0,j.x_)(),{t}=(0,S.$G)("detail"),{setIsRemoveBackgroundLoading:n}=(0,v.ql)();return(0,a.useCallback)(()=>{e({type:"danger",title:t("removeBackground.errorTitle"),message:t("removeBackground.errorMessage"),duration:3e3}),n(!1)},[e,t,n])};var R=n(20256),A=n(85618);let E=(e,t)=>{let n=new Image;n.onload=function(){let e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=n.width,e.height=n.height,!r){t(!1);return}r.drawImage(n,0,0);let a=r.getImageData(0,0,e.width,e.height).data;for(let e=0;e<a.length;e+=4)if(0!==a[e+3]){t(!0);return}t(!1)},n.src=e};var P=n(43815),O=n(65508);let N=()=>(0,a.useCallback)(()=>{(0,O.r)("bb6a004a-8f03-4d2a-88fb-a63499d4591a").then(e=>{e.init(),e.logEvent("remove_bg")})},[]),D=()=>{let{id:e}=(0,h.ph)(),{setIsRemoveBackgroundLoading:t}=(0,v.ql)(),n=(0,r.b9)(c(e)),{setImagePreviewMode:o}=(0,v.TV)();return(0,a.useCallback)((e,r)=>{t(!1),o("transparent"),e&&r&&n({url:e,uuid:r})},[o,t,n])},T=()=>{let e=I(),t=D(),{id:n,premium:r,regularType:o}=(0,h.ph)(),{setImageUrl:i}=(0,v.ql)(),l=(0,R.mS)(),u=N();return(0,a.useCallback)(async(a,c)=>{try{i(a);let s=await (0,P.C)(a);E(s,a=>{if(!a){e();return}t(s,c),l({resourceId:n,isResourcePremium:r,resourceType:o,downloadType:A.os}),u()})}catch(t){e()}},[i,t,l,n,r,o,u,e])},V=()=>{let e=(0,a.useRef)(0),t=(0,a.useRef)(null),n=T(),r=I(),o=(0,k.J)();return(0,a.useCallback)(a=>{t.current=setInterval(async()=>{if(e.current>=f.wj){t.current&&clearInterval(t.current),r();return}e.current+=1;let i=e.current===f.wj,l=await p(a,i);l&&(n(l,a),await o(),t.current&&clearInterval(t.current))},f._R)},[n,r,o])},M=()=>{let{id:e,premium:t,regularType:n,url:r}=(0,h.ph)(),{setIsRemoveBackgroundLoading:o}=(0,v.ql)(),{url:i}=s(),l=I(),u=V(),c=D(),d=(0,g.PN)(),f=C(),{setImageModeToOriginal:m}=(0,v.TV)(),p=(0,a.useCallback)(()=>d({event:"ga4event",event_name:"background_remove",category:n,file_id:e,license:t?"premium":"free",location:"resource_detail",url_link:r}),[e,t,n,r,d]);return(0,a.useCallback)(async()=>{if(o(!0),m(),i){c();return}try{p();let t=await f(e);if(!t){o(!1);return}let{uuid:n}=t;u(n)}catch(e){l()}},[o,m,i,c,p,f,e,u,l])};var L=n(21639),q=n(78683),U=n(55662),z=n(24418);let F=()=>{let{id:e,name:t,author:n,premium:r,regularType:o,isAIGenerated:i,dimensions:{width:l=0,height:u=0}={}}=(0,h.ph)(),{downloadCopyImageToClipboard:c}=(0,q.t)(),{url:d,uuid:m}=s(),p=(0,z.M)(),b=(0,U.m)(),g=(0,L.TH)({file_extension:f.QC.toLowerCase(),file_name:t,file_id:e,license:r?"premium":"free",resolution:"original",style:"na",author_name:n.name,category:i?"ai_image":o,action:"copy",location:"resource_detail"});return(0,a.useCallback)(()=>{c({url:d,width:l,height:u}),g(),b({resourceId:e,isResourcePremium:r,resourceType:o,downloadType:A.PF}),p(m,A.PF)},[c,u,e,d,p,r,o,g,b,m,l])},J=()=>{let e=M(),{hideAttribution:t}=(0,h.ph)(),{isRemoveBackgroundActive:n,setRemoveBackgroundAnimationEnd:r}=(0,v.ql)(),{setImagePreviewMode:o}=(0,v.TV)();return(0,a.useCallback)(async()=>{r(!1),t(),n?o("original"):await e()},[t,n,e,o,r])}},43815:function(e,t,n){n.d(t,{C:function(){return r}});let r=e=>fetch(e).then(e=>e.blob()).then(e=>new Promise(t=>{let n=new FileReader;n.onload=function(){t(this.result)},n.readAsDataURL(e)}))},68320:function(e,t,n){n.d(t,{P1:function(){return u},SD:function(){return i},he:function(){return o},lS:function(){return a},sz:function(){return l}});var r=n(24399);let a=(0,r.cn)(!1),o=(0,r.cn)(null),i=(0,r.cn)(!1),l=(0,r.cn)(!1),u=(0,r.cn)(0)},78683:function(e,t,n){n.d(t,{t:function(){return d}});var r=n(59190),a=n(59813),o=n(14409),i=n(62835),l=n(32748),u=n(52983),c=n(7489);let s=(e,t)=>{let n=document.createElement("a");t&&(n.download=t),n.href=e,n.click(),setTimeout(function(){n.remove()},200)},d=()=>{let{t:e}=(0,l.$G)(["detail","common"]),[t,n]=(0,u.useState)(!1),{openToast:d}=(0,i.x_)(),{setConfirm:f}=(0,c.N)(),m=(0,u.useCallback)(async t=>{try{(0,o.C)()||d({type:"danger",message:e("clipboardNotSupported")}),n(!0),await navigator.clipboard.write([t]),d({type:"success",title:e("detail:copyImageClipboard"),message:e("common:copiedsuccessfully"),testId:"notification-copied-successfully"})}catch(e){d()}finally{n(!1)}},[d,e]),p=(0,u.useCallback)(async(e,t,n,o,i,l)=>{let u="clipboard"===o,c=u?e.naturalWidth:t,d=u?e.naturalHeight:n,p=document.createElement("canvas");p.width=c,p.height=d;let b=p.getContext("2d");b&&(b.drawImage(e,0,0,c,d),p.toBlob(async e=>{let t;if(e){if(u){if((0,a.gn)()||r.G6){t=new ClipboardItem({[e.type]:Promise.resolve(e)}),f(()=>{m(t)});return}m(t=new ClipboardItem({[e.type]:e}))}else{let t=window.URL.createObjectURL(e);s(t,l),window.URL.revokeObjectURL(t)}}},"image/".concat(i),1))},[m,f]);return{downloadImageSize:(0,u.useCallback)(async e=>{let{url:t,filename:n,width:r,height:a}=e;try{let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{p(e,r,a,"download","jpeg",n)},e.onerror=()=>d()}catch(e){d()}},[p,d]),downloadCopyImageToClipboard:(0,u.useCallback)(async e=>{let{url:t,width:r,height:a}=e;try{n(!0);let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{p(e,r,a,"clipboard","png")},e.onerror=()=>{n(!1),d()}}catch(e){n(!1),d()}},[d,p]),isCopying:t}}},44842:function(e,t,n){var r=n(97458);t.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"m405.678 227.322-69-69A25 25 0 0 0 319 151H166c-35.841 0-65 29.159-65 65v35H66c-35.841 0-65 29.159-65 65v262c0 35.841 29.159 65 65 65h182c35.841 0 65-29.159 65-65v-35h35c35.841 0 65-29.159 65-65V245a25 25 0 0 0-7.322-17.678M263 578c0 8.271-6.729 15-15 15H66c-8.271 0-15-6.729-15-15V316c0-8.271 6.729-15 15-15h35v177c0 35.841 29.159 65 65 65h97zm85-85H166c-8.271 0-15-6.729-15-15V216c0-8.271 6.729-15 15-15h128v44c0 13.808 11.192 25 25 25h44v208c0 8.271-6.729 15-15 15"})})},77575:function(e,t,n){n.d(t,{Bw:function(){return r.B},to:function(){return a.t}});var r=n(48397),a=n(98159)},59813:function(e,t,n){n.d(t,{gn:function(){return i},eE:function(){return o},Xe:function(){return l}});let r=()=>{if("undefined"==typeof navigator)return"Unknown";let e=navigator.userAgent,t=navigator.platform,n={MacOS:["Macintosh","MacIntel","MacPPC","Mac68K"].includes(t),iOS:["iPhone","iPad","iPod"].includes(t),Windows:["Win32","Win64","Windows","WinCE"].includes(t),Android:/Android/.test(e),Linux:/Linux/.test(t),Unknown:!0};return Object.keys(n).find(e=>n[e])||"Unknown"},a=r(),o=()=>"MacOS"===a,i=()=>"iOS"===a,l=()=>i()||"Android"===r()},14409:function(e,t,n){n.d(t,{C:function(){return r}});let r=()=>!!window.navigator.clipboard&&!!window.navigator.clipboard.write}}]);